# DLT Configuration for NYC Taxi Pipeline
# This configuration connects dlt to MinIO S3 and Apache Polaris Iceberg catalog

[runtime]
log_level = "INFO"  # Set to DEBUG for more verbose logging
dlthub_telemetry = true

# Filesystem source configuration for MinIO S3
[sources.filesystem]
bucket_url = "s3://data"  # MinIO bucket containing CSV files
# S3 credentials are set via environment variables in the pipeline script

[sources.filesystem.credentials]
# MinIO S3 credentials
aws_access_key_id = "minio_root"
aws_secret_access_key = "m1n1opwd"
endpoint_url = "http://localhost:9000"
region_name = "us-west-2"

# Iceberg REST catalog configuration (Apache Polaris)
[destination.iceberg_rest]
catalog_uri = "http://localhost:8181/api/catalog"
oauth2_server_uri = "http://localhost:8181/api/catalog/v1/oauth/tokens"
credential = "root:s3cr3t"
warehouse = "nyc_taxi_catalog"
namespace = "raw"

# Optional: S3 storage configuration for Iceberg data files
# These credentials are used by Iceberg to write Parquet files to MinIO
[destination.iceberg_rest.storage_config]
s3_access_key_id = "minio_root"
s3_secret_access_key = "m1n1opwd"
s3_endpoint = "http://localhost:9000"
s3_region = "us-west-2"
